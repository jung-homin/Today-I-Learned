# Clean Code

## 목차

- [추천사 ~ 1장. 깨끗한 코드](#-추천사--1장-깨끗한-코드)
- [2장. 의미 있는 이름](#-2장-의미-있는-이름)
- [3장. 함수](#-3장-함수)
- [4장. 주석](#-4장-주석)
- [5장. 형식 맞추기](#-5장-형식-맞추기)
- [6장. 객체와 자료 구조](#-6장-객체와-자료-구조)
- [7장. 오류 처리](#-7장-오류-처리)

---

### 📖 추천사 ~ 1장. 깨끗한 코드

```
🤔 기억하고 싶은 내용
```

- 5S 원칙 _(추천사 中)_

  - 정리 Seiri - 적절한 명명법 등과 같은 방법을 사용해 무엇이 어디에 있는지 알아야 한다. ✓
  - 정돈 Seiton - 코드는 누구나 예상하는 위치에 있어야 한다. ✓
  - 청소 Seiso - 과거 이력이나 미래 바람을 기억한 주석 혹은 주석으로 처리한 코드는 정리해야 한다. ✓
  - 청결 Seiketus - 그룹 내에서 일관적인 구현 스타일과 기법, 표준을 정해야 한다. ✓
  - 생활화 Shutsuke - 자기 작품을 자주 돌아보고 기꺼이 변경해야 한다. ✓

- 첫아이 이름을 짓듯이 심사숙고해서 변수 이름을 지어야 한다. _(추천사 中)_

- 우리 모두는 대충 짠 프로그램이 돌아간다는 사실에 안도감을 느끼며 그래도 안 돌아가는 프로그램보다 돌아가는 쓰레기가 좋다고 스스로를 위로한 경험이 있다. 다시 돌아와 나중에 정리하겠다고 다짐했었다. 물론 그때 그 시절 우리는 르블랑의 법칙을 몰랐다. **나중은 결코 오지 않는다.** (p.4)

- 의존성을 최대한 줄여야 유지보수가 쉬워진다. 오류는 명백한 전략에 의거해 철저히 처리한다. 성능을 최적으로 유지해야 사람들이 원칙 없는 최적화로 코드를 망치려는 유혹에 빠지지 않는다. **깨끗한 코드는 한 가지를 제대로 한다.** _(p.9 비야네 스트롭스트룹 인터뷰 中)_

- 깨끗한 코드는 잘 쓴 문장처럼 읽힌다. _(p.10 그래디 부치 인터뷰 中)_

- 중복을 피하라. 한 기능만 수행하라, 제대로 표현하라. 작게 추상화하라. 이상이다. _(P.14)_

- 보이스카우트 규칙 **캠프장은 처음 왔을 때보다 더 개끗하게 해놓고 떠나라.** _(p.19)_

- 한꺼번에 많은 시간과 노력을 투자해 코드를 정리할 필요가 없다. 변수 이름 하나를 개선하고, 조금 긴 함수 하나를 분할하고, 약간의 중복을 제거하고, 복잡한 if문 하나를 정리하면 충분하다. _(p.19)_

```
😀 소감
```

항상 느끼고 있던 부분을 이 책이 속 시원하게 긁어주었다. 특정 기능을 구현하기 위해 신나서 코드를 줄줄 써내려가다보면 갑자기 갑갑한 순간이 찾아오곤 했다. 내가 직접 쓴 코드인데 며칠만에 변수가 어떤 값을 갖고 있고 함수가 어떤 역할을 하는지 헷갈리기 시작한다. **"나중에 날 잡아서 정리 해야겠다."** 라고 생각만 하고 여전히 제발 코드가 원하는대로 동작만 해달라는 식으로 더 어질러 놓곤 했다. 정말 나중이라는 것은 오지 않았고, 그 코드를 수정해야할 일이 생기면 한숨을 쉬며 많은 시간을 소모했다.

많은 시간을 투자해서 깨끗한 코드를 작성하는 것이 결국엔 더 빨리 코드를 작성하는 것이라는 걸 이 책을 통해 다시 한 번 느꼈고 그것을 연습하고 익혀서 생활화 한다면 나에게 정말 큰 도움이 되리라고 생각한다.

---

### 📖 2장. 의미 있는 이름

```
🤔 기억하고 싶은 내용
```

- **의도를 분명히 밝혀라**

  - 좋은 이름을 지으려면 시간이 걸리지만 좋은 일므으로 절약하는 시간이 훨씬 더 많다. _(p.22)_

  - 변수나 함수 그리고 클래스 이름은 다음과 같이 긁직한 질문에 모두 답해야 한다. 변수(혹은 함수나 클래스)의 존재 이유는? 수행 기능은? 사용 방법은? 따로 주석이 필요하다면 의도를 분명히 드러내지 못했다는 말이다. _(p.22)_

- **의미 있게 구분하라**

  - 명확한 관례가 없다면 변수 moneyAmount는 money와 구분이 안 된다. cus-tomerInfo는 customer와, accountData는 acount와, theMessage는 message와 구분이 안 된다. 읽는 사람이 차이를 알도록 이름을 지어라. _(p.27)_

- **발음하기 쉬운 이름을 사용하라**

  - 발음하기 어려운 이름은 토론하기도 어렵다. 바보처럼 들리기 십상이다. "흠, 여기 비 씨 알 3 씨 엔 티에 피 에스 지 큐 int가 있군요. 보입니까?" 발음하기 쉬운 이름은 중요하다 프로그래밍은 사회 활동이기 때문이다. _(p.27)_

- **클래스 이름**

  - 클래스 이름과 객체 이름은 명사나 명사구가 적합하다. Customer, WikiPage, Account, AddressParser 등이 좋은 예다. Manager, Processor, Data, Info 등과 같은 단어는 피하고, 동사는 사용하지 않는다. _(p.32)_

- **메서드 이름**

  - 메서드 이름은 동사나 동사구가 적합하다. postPayment, deletePage, save 등이 좋은 예다. 접근자, 변경자, 조건자는 javabean 표준에 따라 값 앞에 get, set, is를 붙인다. _(p.32)_

- **기발한 이름은 피하라**

  - 이름이 너무 기발하면 저자와 유머 감각이 비슷한 사람만, 그리고 농담을 기억하는 동안만, 이름을 기억한다. _(p.32)_

```
😀 소감
```

이전 회사에서 일 할 때 변수 이름은 아니고 CSS 클래스 이름 때문에 골치 아팠던 적이 있는데, 이미 작성되어 있는 CSS 파일에 text_cdnx, text_xdnx, text_cxxx 등과 같은 클래스가 있었다. 도대체 이게 뭘 의미하는지 이해가 안 돼서 상사에게 물어봤더니 주석을 찾아서 읽어보라는 대답이 돌아왔다. 아무리 찾아도 주석은 없었고, 선배 동료 두 명에게도 물어봤으나 모른다고 했다. 답답해서 상사에게 다시 질문을 하였고, 너무 오래 전에 작성한 거라 기억이 나질 않는다는 대답이 돌아왔다.

결국 혼자 추측한 결과 text 뒤에 나오는 알파벳의 정체는 **C** _(contents)_ **D** _(date)_ **N** _(notice)_ _(마지막은 뭐였는지 기억이 나질 않는다.)_ 였던 것 같고 이것이 맞는지 조차 답변을 받지 못했다.

이처럼 나쁜 변수 이름으로 인해 팀원 간의 소통이 제대로 되지 않을 수 있고 이는 전체적인 작업 속도를 크게 저하시킨다는 것을 직접 느꼈기에 오늘 읽은 **2장. 의미 있는 이름**에 더욱 공감이 되었고, 앞으로도 시간을 투자하여 변수 _(함수나 클래스, 메서드 역시)_ 이름을 지어야겠다고 생각했다.

### 📖 3장. 함수

```
🤔 기억하고 싶은 내용
```

- **작게 만들어라**

  - 가로 150자를 넘어서는 안 된다. 함수는 100줄을 넘어서는 안 된다. 아니 20줄도 길다. _(p.43)_

  - 함수에서 들여쓰기 수준은 1단이나 2단을 넘어서면 안 된다. 당연한 말이지만 그래야 함수는 읽고 이해하기 쉬워진다. _(p.44)_

- **한 가지만 해라**

  - 다음은 지난 30여년 동안 여러 가지 다양한 표현으로 프로그래머들에게 주어진 충고다  
    **_함수는 한 가지를 해야 한다. 그 한 가지를 잘 해야 한다. 그 한 가지만을 해야 한다._** _(p.44)_
  - 단순히 다른 표현이 아니라 의미 있는 이름으로 다른 함수를 추출할 수 있다면 그 함수는 여러 작업을 하는 셈이다. _(p.45)_

- **서술적인 이름을 사용하라**

  - 이름이 길어도 괜찮다. 겁먹을 필요없다. 길고 서술적인 이름이 짧고 어려운 이름보다 좋다. 길고 서술적인 이름이 길고 서술적인 주석보다 좋다. _(p.49)_

- **함수 인수**

  - 함수에서 이상정인 인수 개수는 0개(무항)이다. 다음은 1개(단항)고, 다음은 2개(이항)다. 3개(삼항)는 가능한 피하는 편이 좋다. 4개 이상(다항)은 특별한 이유가 필요하다. 특별한 이유가 있어도 사용하면 안 된다. _(p.32)_
  - 함수로 부울 값을 넘기는 관례는 정말로 끔찍하다. 왜냐고? 함수가 한꺼번에 여러가지를 처리한다고 대놓고 공표하는 셈이니까! 플래그가 참이면 이걸 하고 거짓이면 저걸 한다는 말이니까! _(p.52)_
  - 단항 함수는 함수와 인수가 동사/명사 쌍을 이뤄야 한다. 예를 들어, write(name)은 누구나 곧바로 이해한다. '이름*name*'이 무엇이든 '쓴다*write*'는 뜻이다.

- **부수 효과를 일으키지 마라**

  - 부수 효과는 거짓말이다. 함수에서 한 가지를 하겠다고 약속하고선 남몰래 다른 짓도 하니까. 때로는 예상치 못하게 클래스 변수를 수정한다. 때로는 함수로 넘어온 인수나 시스템 전역 변수를 수정한다. 어느 쪽이든 교활하고 해로운 거짓말이다. _(p.55)_

- **명령과 조회를 분리하라**

  - 함수는 뭔가를 수행하거나 뭔가에 답하거나 둘 중 하나만 해야 한다. 둘 다 하면 안 된다. 객체 상태를 변경하거나 아니면 객체 정보를 반환하거나 둘 중 하나다. _(p.56)_

```
😀 소감
```

3장. 함수를 읽는 동안 모르고 있는 내용들이 있어서 조금 어려웠지만 대체적으로 이해할 수 있었다. 함수라는 개념을 이해하고부터 서투르게 함수를 만들곤 했는데 이제 생각해보니 너무 충격적이었다. 인수를 되는대로 여러개 갖다 쓸 때도 있었고 함수 내에서 중첩된 조건문, 당연히 여러 단계의 들여쓰기, 부수효과, 알 수 없는 이름 등 이 장에서 하지 말라는 것은 다 했던 것 같다. 앞으로 함수를 만들 때 조금 더 신중하게 작성을 해야겠디. **_함수는 한 가지를 해야 한다._** 멋있는 말이다.

### 📖 4장. 주석

```
🤔 기억하고 싶은 내용
```

- **사실상 주석은 기껏해야 필요악이다. 프로그래밍 언어 자체가 표현력이 풍부하다면, 아니 우리에게 프로그래밍 언어를 치밀하게 사용해 의도를 표현할 능력이 있다면, 주석은 거의 필요하지 않으리라. 아니, 전혀 필요하지 않으리라.** _(p.68)_

- **주석은 나쁜 코드를 보완하지 못한다.**

  - 모듈을 짜고 보니 짜임새가 엉망이고 알아먹기 어렵다. 지저분한 모듈이라는 사실을 자각한다. 그래서 자신에게 이렇게 말한다. **"이런! 주석을 달아야겠다!"** 아니다! 코드를 정리해야한다! _(p.69)_

- **서술적인 이름을 사용하라**

  - 이름이 길어도 괜찮다. 겁먹을 필요없다. 길고 서술적인 이름이 짧고 어려운 이름보다 좋다. 길고 서술적인 이름이 길고 서술적인 주석보다 좋다. _(p.49)_

- **좋은 주석**

  - 법적인 주석  
    회사가 정립한 구현 표준에 맞춰 법적인 이유로 특정 주석을 넣으라고 명시한다. 예를 들어, 각 소스 파일 첫머리에 주석으로 들어가는 저작권 정보와 소유권 정보는 필요하고도 타당하다. _(p.70)_
    ```javascript
    // Copyright (C) 2003, 2004, 2005 by Object Mentor, Inc. All rights reserved.
    // GNU General Public License 버전 2 이상을 따르는 조건으로 배포한다.
    ```
  - 결과를 경고하는 주석  
    때로 다른 프로그래머에게 결과를 경고할 목적으로 주석을 사용한다. _(p.73)_

    ```java
    // 여유 시간이 충분하지 않다면 실행하지 마십시오
    public void _testWithReallyBigFile()
    {
      writeLinesToFile(100000000);

      reponse.setBody(testFile);
      reponse.readyToSend(this);
      String responseString = output.toString();
      assertSubString("Content-Length: 10000000", responseString);
      assertTrue(bytesSent > 10000000);
    }
    ```

  - TODO 주석  
    때로는 '앞으로 할 일'을 //TODO 주석으로 남겨두면 편하다. _(p.74)_
    ```java
    // TODO-MdM 현재 필요하지 않다.
    // 체크아웃 모델을 도입하면 함수가 필요 없다.
    protected VersionInfo makeVersion() throws Exception
    {
      return null;
    }
    ```

- **나쁜 주석**

  - 같은 이야기를 반복하는 주석  
    주석이 같은 코드 내용을 그대로 중복한다. 자칫하면 코드보다 주석을 읽는 시간이 더 오래 걸린다. _(p.77)_
    ```java
    // this.closed가 true일 때 반환되는 유틸리티 메서드다.
    // 타임아웃에 도달하면 예외를 던진다.
    public synchronized void waitForClose(final long timeoutMillis)
    {
      if(!closed)
      {
        wait(timeoutMillis);
        if(!closed)
        {
          throw new Exception("MockResponseSender could not be closed");
        }
      }
    }
    ```
  - 이력을 기록하는 주석  
    에전에는 모든 모듈 첫머리에 변경 이력을 기록하고 관리하는 관례가 바람직했다. 당시에는 소스 코드 관리 시스템이 없었으니까. 하지만 이제는 혼란만 가중할 뿐이다. 완전히 제거하는 편이 좋다. _(p.81)_
  - 주석으로 처리한 코드  
    주석으로 처리된 코드는 다른 사람들이 지우기를 주저한다. 이유가 있어 남겨놓았으리라고, 중요하니까 지우면 안 된다고 생각한다. 그냥 코드를 삭제하라. 잃어버릴 염려는 없다. 약속한다. _(p.87)_

```
😀 소감
```

이전 직장에서 그누보드를 활용해서 작업을 했기 때문에 그누보드의 PHP 코드를 들여다보곤 했는데 각종 다양한 주석들이 있었던 게 기억이 난다. 그리고 아마 내 기억으로는 90% 이상이 저자가 말하는 나쁜 주석이었다. 나는 작업을 하면서 주석을 쓴 기억이 거의 없다. 아니 그냥 없다고 봐도 되겠다. 그건 내가 주석을 필요로 할 만큼 코드를 복잡하게 짜지 않았다는 것이고 그것은 아마 내가 상당한 초급 개발자이기 때문에 아주 간단한 코드만 작성했기 때문이겠지. 실력이 쌓여, 복잡한 코드를 짤 때 즈음 주석에 대한 부분을 다시 고민해볼 필요가 있겠다.

### 📖 5장. 형식 맞추기

```
🤔 기억하고 싶은 내용
```

- **프로그래머라면 형식을 깔끔하게 맞춰 코드를 짜야 한다. 코드 형식을 맞추기 위한 간단한 규칙을 정하고 모두가 그 규칙을 따라야 한다.** _(p.96)_

- **적절한 행 길이를 유지하라**

  - 5표 5-1이 우리에게 무엇을 말하느냐고? 500줄을 넘지 않고 대부분 200줄 정도인 파일로도 커다란 시스템을 구축할 수 있다는 사실이다.  
    반드시 지킬 엄격한 규칙은 아니지만 바랍직한 규칙으로 삼으면 좋겠다. 일반적으로 큰 파일보다 작은 파일이 이해하기 쉽다. _(P.97)_

- **변수는 사용하는 위치에 최대한 가까이 선언한다.** _(p.101)_

- **종속 함수**

  - 한 함수가 다른 함수를 호출한다면 두 함수는 세로로 가까이 배치한다. 또한 가능하다면 호출하는 함수를 호출되는 함수보다 먼저 배치한다. 그러면 프로그램이 자연스럽게 읽힌다. _(p.104)_

- **프로그래머는 명백히 짧은 행을 선호한다. 그러무로 짧은 행이 바람직하다.** _(p.108)_

- **팀 규칙**

  - 프로그래머라면 각자 선호하는 규칙이 있다. 하지만 팀에 속한다면 자신이 선호해야 할 규칙은 바로 팀 규칙이다. _(p.114)_
  - 스타일은 일관적이고 매끄러워야 한다. 한 소스 파일에서 봤던 형식이 다른 소스 파일에도 쓰이리라는 신뢰감을 독자에게 줘야 한다. _(p.114)_

```
😀 소감
```

이번 주 수요일부터 새로운 직장에서 근무를 시작했는데 꽤나 큰 회사임에도 불구하고 퍼블리싱 규약이 없다고 했다. 이제부터 만들어나갈 거라고 말 하더라. 이 회사까지 총 세 군데의 회사를 경험했는데, 가는 곳 마다 이제부터 만들어나간다고 말을 한다. 아마 팀 내 퍼블리싱 규약을 만드는 것이 생각보다 어려워서 그러리라 생각이 된다. 5장. 형식 맞추기에서는 다른 것 보다 팀 규칙이 정말 중요하다고 생각 된다. 본인이 혼자 개발하고 혼자 서비스를 한다면 모를까 아마 많은 사람들이 특정 팀에 속해 개발을 하지 않을까? 앞으로 많은 고민을 통해 현재 회사의 퍼블리싱 규약을 만들어내야겠다.

### 📖 6장. 객체와 자료 구조

```
🤔 기억하고 싶은 내용
```

- **디미터 법칙**

  - 모듈은 자신이 조작하는 객체의 속사정을 몰라야 한다는 법칙이다. 객체는 자료를 숨기고 함수를 공개한다. 즉, 객체는 조회 함수로 내부 구조를 공개하면 안 된다는 의미다. _(p.123)_

- **기차 충돌**

  - ```java
    final String outputDir = ctxt.getOptions().getScratchDir().getAbsolutePath();
    ```
    흔이 위와 같은 코드를 기차 충돌이라 부른다. 여러 객체가 한 줄로 이어진 기차처럼 보이기 때문이다. 일반적으로 조잡하다 여겨지는 방식이므로 피하는 편이 좋다. 위 코드는 다음과 같이 나누는 편이 좋다.
    ```java
    Options opts = ctxt.getOptions();
    File scratchDir = opts.getScratchDir();
    final String outputDir = scratchDir.getAbsolutePath();
    ```

```
😀 소감
```

오늘 내용은 상당히 어려웠다. 객체와 자료구조에 대한 이해도가 충분하지 않기 때문에 더욱 어려우리라 생각이 든다. 많은 시간을 들여서 교양 지식 정도로 쌓을 수 있으면 좋으련만... 새 회사에 적응하는 중이라 정신이 없다. 일단 시작했으니 끝까지 읽어보고 챌린지도 끝까지 해보자!

### 📖 7장. 오류 처리

```
🤔 기억하고 싶은 내용
```

- **null을 반환하지 마라**

  - null을 반환하는 코드는 일거리를 늘릴 뿐만 아니라 호출자에게 문제를 떠넘긴다. 누구 하나라도 null확인을 빼먹는다면 애플리케이션이 통제 불능에 빠질지도 모른다. _(p.139)_

- **null을 전달하지 마라**

  - 메서드에서 null을 반환하는 방식도 나쁘지만 메서드로 null을 전달하는 방식은 더 나쁘다. 정상적인 인수로 null을 기대하는 API가 아니라면 메서드로 null을 전달하는 코드는 최대한 피한다. _(p.140)_

```
😀 소감
```

오늘 내용도 잘 와닿지가 않는다. 초급 퍼블리셔인 내가 이해하기에는 조금 어려운 책같다고 생각한다. 물론 끝까지 읽을 것이다. 그리고 나중에 조금 더 개발자다워지면 또 읽을 것이다.
